<!DOCTYPE html> 
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="favicon.png" type="image/png">
<link rel="shortcut icon" href="favicon.png" type="image/png">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f0c29">
  <title>ChatDZ</title>
  <script>
fetch('/config.json') // ููุฑุฃ ููู ุงูุฅุนุฏุงุฏ
  .then(res => res.json())
  .then(config => {
    if (config.maintenance) {
      // ุฅุฐุง ูุงูุช ุงูุตูุงูุฉ ููุนูุฉ ูุญูู ุงููุณุชุฎุฏู ูุจุงุดุฑุฉ ูุตูุญุฉ ุงูุตูุงูุฉ
      window.location.href = "/maintenance.html";
    }
  });

let uploadedImageBase64 = "";

document.getElementById("image-upload").addEventListener("change", function () {
  const file = this.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onloadend = () => {
    uploadedImageBase64 = reader.result.split(",")[1];
    document.getElementById("preview-img").src = reader.result;
    document.getElementById("preview-img").style.display = "block";
  };
  reader.readAsDataURL(file);
});

async function askOnImage() {
  const question = document.getElementById("image-question").value.trim();
  if (!uploadedImageBase64 || !question) {
    alert("๐ท ูุงุฒู ุตูุฑุฉ ูุณุคุงู!");
    return;
  }

  appendMessage("๐ผ๏ธ ุณุคุงูู ุนูู ุงูุตูุฑุฉ: " + question, "user");

  try {
    const response = await fetch("https://api-inference.huggingface.co/models/Salesforce/blip-vqa-base", {
      method: "POST",
      headers: {
        "Authorization": "Bearer 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",
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        inputs: {
          image: uploadedImageBase64,
          question: question
        }
      })
    });

    const data = await response.json();
    const answer = data.answer || "โ ูุง ูุฏุฑุชุด ูุฌุงูุจ ุนูู ุงูุตูุฑุฉ";

    appendMessage("๐ท ุงูุฌูุงุจ: " + answer, "bot");
  } catch (err) {
    appendMessage("โ ุญุฏุซ ุฎุทุฃ ูู ุงูุชุญููู", "bot");
  }
}

</script>
  <style>
    body {
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: #fff;
      font-family: 'Cairo', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
    }

    #chat-container {
      width: 95%;
      max-width: 650px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(10px);
      padding: 20px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
    }

    #chat-header {
      font-size: 26px;
      font-weight: bold;
      margin-bottom: 15px;
      text-align: center;
    }

    #user-name-input {
      text-align: center;
      margin-bottom: 15px;
    }

    #user-name-input input {
      padding: 10px;
      border-radius: 10px;
      border: none;
      width: 80%;
      font-size: 16px;
    }

    #user-name-input button {
      padding: 10px 20px;
      background: #0a84ff;
      color: white;
      border: none;
      border-radius: 10px;
      margin-top: 10px;
      cursor: pointer;
    }

    #chat-messages {
      background: rgba(255, 255, 255, 0.08);
      padding: 10px;
      border-radius: 12px;
      height: 320px;
      overflow-y: auto;
      margin-bottom: 15px;
    }

    .user-message, .bot-message {
      margin: 5px 0;
      padding: 10px;
      border-radius: 12px;
      max-width: 90%;
    }

    .user-message {
      background: #1d1f20;
      text-align: right;
      align-self: flex-end;
    }

    .bot-message {
      background: #293462;
      text-align: left;
      align-self: flex-start;
    }

    #chat-input-area {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    #chat-input-area input {
      flex-grow: 1;
      padding: 12px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.1);
      color: white;
    }

    #chat-input-area button {
      padding: 12px;
      background: #00c9a7;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      color: white;
      font-size: 18px;
    }

    #suggestions button {
      margin: 4px;
      padding: 8px 12px;
      border: none;
      border-radius: 10px;
      background: #ff6f61;
      color: white;
      cursor: pointer;
    }

    #settings {
      margin-top: 15px;
      padding: 10px;
      background-color: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }

    select {
      padding: 6px;
      border-radius: 8px;
      border: none;
    }
    .typing-indicator {
  display: inline-block;
  font-size: 18px;
  line-height: 1;
}

.typing-indicator span {
  display: inline-block;
  animation: blink 1.5s infinite;
}

.typing-indicator span:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-indicator span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes blink {
  0% { opacity: 0.2; }
  20% { opacity: 1; }
  100% { opacity: 0.2; }
}
.typing-indicator {
  display: flex;
  align-items: center;
  gap: 4px;
  margin: 5px 0;
  padding: 10px;
  background: #293462;
  border-radius: 12px;
  width: fit-content;
  animation: fadeIn 0.3s ease-in-out;
}

.typing-indicator span {
  width: 8px;
  height: 8px;
  background: white;
  border-radius: 50%;
  animation: typing 1.3s infinite ease-in-out;
}

.typing-indicator span:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-indicator span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes typing {
  0%, 80%, 100% {
    transform: scale(0.7);
    opacity: 0.4;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
/* ุงููุถุน ุงูุฏุงูู */
.dark-mode {
  background: linear-gradient(135deg, #121212, #1e1e1e, #000);
  color: #ffffff;
}
.dark-mode #chat-container {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
}
.dark-mode input, .dark-mode select {
  background: #333;
  color: white;
}
.dark-mode button {
  background: #222 !important;
  color: white !important;
}
@media screen and (max-width: 600px) {
  body {
    padding: 10px;
  }

  #chat-container {
    width: 100%;
    padding: 15px;
    border-radius: 12px;
  }

  #user-name-input input,
  #user-name-input button,
  #chat-input-area input,
  #chat-input-area button,
  #suggestions button,
  #settings,
  #weather-popup,
  #prayer-popup {
    font-size: 16px;
    width: 100% !important;
    box-sizing: border-box;
  }

  #chat-input-area {
    flex-direction: column;
    gap: 8px;
  }

  #chat-messages {
    height: 250px;
  }

  #suggestions {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }

  #suggestions button {
    flex: 1 0 45%;
    margin: 4px;
  }
}
.user-message, .bot-message {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin: 5px 0;
  padding: 10px;
  border-radius: 12px;
  max-width: 90%;
}

.user-message img, .bot-message img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
}

.user-message {
  background: #1d1f20;
  text-align: right;
  align-self: flex-end;
  flex-direction: row-reverse;
}

.bot-message {
  background: #293462;
  text-align: left;
  align-self: flex-start;
  flex-direction: row;
}
.user-message div,
.bot-message div {
  font-family: 'Cairo', sans-serif;
  font-size: 16px;
  line-height: 1.6;
  color: #f1f1f1;
  white-space: pre-wrap;
  word-wrap: break-word;
  animation: fadeInUp 0.3s ease-in-out;
  padding: 6px 10px;
  border-radius: 8px;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.transparent-share-btn {
  position: fixed;
  top: 15px;
  left: 15px;
  z-index: 999;
  background-color: transparent;
  color: #1e90ff; /* ููู ุงููุต */
  border: none;
  font-size: 16px;
  cursor: pointer;
  font-weight: bold;
  transition: opacity 0.3s ease;
}

.transparent-share-btn:hover,
.transparent-share-btn:active {
  opacity: 0.5; /* ุดูุงููุฉ ุนูุฏ ุงููุฑูุฑ ุฃู ุงูุถุบุท */
}

  </style>
</head>
<body>
<button onclick="copySiteLink()" class="transparent-share-btn">๐ ุดุงุฑู ุงููููุน</button>

  <!-- ูุงูุฐุฉ ุฅุฏุฎุงู ุงูููุงูุฉ -->
<div id="weather-popup" style="display:none; position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%);
 background: white; border: 2px solid #ccc; padding: 20px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.3); z-index: 1000;">
  <label for="wilayaInput">๐ค๏ธ ุฃุฏุฎู ุงุณู ููุงูุชู:</label>
  <input type="text" id="wilayaInput" placeholder="ูุซุงู: Alger" style="margin-top: 8px; width: 100%; padding: 8px;">
  <button onclick="getWeatherFromInput()" style="margin-top: 10px;">ุนุฑุถ ุงูุทูุณ</button>
</div>
<!-- ูุงูุฐุฉ ุฅุฏุฎุงู ุงูููุงูุฉ ููุตูุงุฉ -->
<div id="prayer-popup" style="display:none; position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%);
 background: white; border: 2px solid #ccc; padding: 20px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.3); z-index: 1000;">
  <label for="prayerWilayaInput">๐ ุฃุฏุฎู ุงุณู ููุงูุชู:</label>
  <input type="text" id="prayerWilayaInput" placeholder="ูุซุงู: Oran" style="margin-top: 8px; width: 100%; padding: 8px;">
  <button onclick="getPrayerTimes()" style="margin-top: 10px;">ุนุฑุถ ุฃููุงุช ุงูุตูุงุฉ</button>
</div>

  <div id="chat-container">
    <div id="chat-header">ูุฑุญุจุง ุจู ูู ูู ุดุงุช ุฏุงุฑุฌุฉ ูุง  <span id="user-display-name"></span></div>
    <div style="text-align:center; margin-bottom: 10px;">
  <button onclick="changeUsername()" style="padding: 8px 16px; background: #ffaa00; border: none; border-radius: 10px; color: white; cursor: pointer;">
    ๐ ุบูุฑ ุงูุงุณู
  </button>
</div>
    <div id="user-name-input">
      <label>ูุด ูุณููู </label>
      <input type="text" id="username" placeholder="ูุด ุงุณูู.." />
      <br />
      <button onclick="saveUsername()">ุญูุธ</button>
    </div>
    <div id="chat-messages"></div>
    <div id="chat-input-area">
      <div style="text-align: center; margin-bottom: 15px;">
  <button onclick="clearChat()" style="background:#ff4d4d;padding:10px 20px;border:none;border-radius:10px;color:white;cursor:pointer;">๐๏ธ ูุณุญ ุงููุญุงุฏุซุฉ</button>
  <button onclick="exportChat()" style="margin-top: 20px;">๐ ุตุฏูุฑ ุงููุญุงุฏุซุฉ</button>
</div>
      <input type="text" id="user-input" placeholder="ุฃูุชุจ ููุง..." />
      <button onclick="sendMessage()">ุงุจุนุช</button>
<button onclick="startVoiceRecognition()" title="ุชููู ูุนุงูุง ุจุงูุตูุช ๐๏ธ">๐ค</button>
    </div>
    <div id="suggestions">
      <button onclick="suggest('ูุณุงุนุฏุฉ ูู ุงููุฏุฑุณุฉ')">๐ ุงููุฏุฑุณุฉ</button>
      <button onclick="suggest('ูุณุงุนุฏุฉ ูู ุงูุนูู')">๐ผ ุงูุนูู</button>
      <button onclick="suggest('ููุชุฉ')">๐ ููุชุฉ</button>
      <button onclick="suggest('ุฃูุนุงุจ ุฐูุงุก')">๐งฉ ุฃูุนุงุจ</button>
      <button onclick="suggest('ุฃุณุชุงุฐ ุฎุงุต')">๐จโ๐ซ ุฃุณุชุงุฐ</button>
           <button onclick="analyzeMood()">๐ ุงููุฒุงุฌ</button>
      <button onclick="addReminder()">โฐ ุฃุถู ุชุฐููุฑ</button>
      <button onclick="suggest('ุฌุฏููู')">๐ ุฌุฏููู</button>
      <button onclick="suggest('ุฃููุงุช ุงูุตูุงุฉ')">๐ ุงูุตูุงุฉ</button>
      <button onclick="suggest('ุทูุณ ุงูููู')">๐ฆ๏ธ ุงูุทูุณ</button>
      <button onclick="suggest('ุฃุฎุจุงุฑ ููุงูุชู')">๐ฐ ุงูุฃุฎุจุงุฑ</button>
      <button onclick="checkHolidayToday()">๐ ุนุทูุฉ ุงููููุ</button>
      <button onclick="getDinarRate()">๐ฐ ุงูุฏููุงุฑ</button>
      <button onclick="showDailySecret()">๐ ุณุฑู ุงูููู</button>
      <button onclick="giveIslamicStory()">๐ ูุตุฉ ุฏูููุฉ</button>
    </div>
    <!-- ุฒุฑ ูุชุญ/ุฅุบูุงู ุงูุฅุนุฏุงุฏุงุช -->
<div style="text-align: center; margin-top: 10px;">
  <button onclick="toggleSettings()" style="padding: 10px 20px; background: #444; border: none; border-radius: 10px; color: white; cursor: pointer;">
    โ๏ธ ุฅุนุฏุงุฏุงุช
  </button>
</div>

<!-- ุฅุนุฏุงุฏุงุช ุงููููุน -->
<div id="settings" style="display:none; margin-top: 15px; padding: 10px; background-color: rgba(0, 0, 0, 0.2); border-radius: 10px;">
  <h3>โ๏ธ ุงูุฅุนุฏุงุฏุงุช</h3>
  <p>๐ ูุฐุง ุงููููุน ุงุณูู ChatDZ. ุชู ุจุฑูุฌุชู ุจูุงุณุทุฉ ูุงุฑุณ ููุฒุงู ููุฏ ุชุทููุฑ ุจุงุด ูุนุงูููู ุฃูุซุฑุ ูุชุณุชุงูุฏู ุจููุก.</p>
  <p>๐ฑ ููุชูุงุตู: <a href="https://www.instagram.com/sxnaxke/" target="_blank">@sxnaxke</a></p>
  <p>๐ ุชุบููุฑ ุงููุบุฉ:
    <select id="language-select">
      <option>ุงูุนุฑุจูุฉ</option>
      <option>ูุฑูุณูุฉ</option>
      <option>ุฅูุฌููุฒูุฉ</option>
    </select>
  </p>
  <p>๐ ุงููุถุน: 
    <button onclick="toggleTheme()" style="margin-top: 5px; padding: 5px 12px; border: none; border-radius: 8px; background: #ccc;">ุชุจุฏูู ุงููุถุน</button>
  </p>
</div>

  
  <script>
let availableVoices = [];

function loadVoices() {
  availableVoices = window.speechSynthesis.getVoices();
  if (availableVoices.length === 0) {
    // ูู ุชุชุฌูุฒ ุงูุฃุตูุงุชุ ูุฎุฒููู
    window.speechSynthesis.onvoiceschanged = () => {
      availableVoices = window.speechSynthesis.getVoices();
    };
  }
}

window.onload = () => {
  loadVoices();
};


    
  fetch("config.json?_=" + new Date().getTime()) 
    .then(response => response.json())
    .then(config => {
      if (config.maintenance) {
        window.location.href = "maintenance.html";
      }
    })
    .catch(err => {
      console.error("ูุง ูุฏุฑุด ููุฑุฃ config.json", err);
    });
const dzHolidays = {
  "01-01": "๐ ุฑุฃุณ ุงูุณูุฉ ุงููููุงุฏูุฉ",
  "01-05": "๐๏ธ ุนูุฏ ุงูุนูุงู",
  "05-07": "๐ ุนูุฏ ุงูุงุณุชููุงู",
};
function getDinarRate() {
  fetch('https://api.exchangerate-api.com/v4/latest/DZD')
    .then(res => res.json())
    .then(data => {
      const usd = data.rates.USD;
      appendMessage(`๐ฐ 1 ุฏููุงุฑ = ${usd.toFixed(2)} ุฏููุงุฑ ุฌุฒุงุฆุฑู ุงูููู`, "bot");
    })
    .catch(err => appendMessage("โ ูุง ูุฏุฑูุงุด ูุฌูุจู ุงูุณุนุฑ", "bot"));
}

function checkHolidayToday() {
  const today = new Date();
  const key = `${String(today.getDate()).padStart(2, '0')}-${String(today.getMonth() + 1).padStart(2, '0')}`;

  if (dzHolidays[key]) {
    appendMessage(`๐ ุงูููู ุนุทูุฉ ุฑุณููุฉ: ${dzHolidays[key]}`, "bot");
  } else {
    appendMessage("๐ ุงูููู ููุณ ุนุทูุฉ ุฑุณููุฉ", "bot");
  }
}


// ๐ฆ ูุตุงุฆุญ ููููุฉ
const dailyTips = [
  "๐ง ูุตูุญุฉ ุงูููู: ุฎูู ูุจู ูุง ุชุฌุงูุจุ ุงูุฐูุงุก ุตุจุฑ โจ",
  "๐ง ุดุฑุจ ุงููุงุก ูู ุณุงุนุชูู ูุนุทูู ุทุงูุฉ ุฑููุจุฉ!",
  "๐ด ุฌุฑุจ ุชุจุนุฏ ุนูู ุงููุงุชู ุณุงุนุฉ ูุจู ุงูููู ๐ด",
  "๐ ุชุนูู ุญุงุฌุฉ ุฌุฏูุฏุฉ ุงููููุ ุญุชู ูู ูููุฉ!",
  "๐๏ธ ูุงู ุจูุฑูุ ุชุฑุจุญ ููุงุฑู ุจูุฑู!",
  "๐งโโ๏ธ ุงูููุณ ุงูุนููู ูููุต ุงููููุ ุฌุฑุจู 3 ูุฑุงุช!",
  "๐ฆท ูุง ุชูุณุงุด ุชูุฑุดู ุณูุงูู ูุจู ูุง ุชูุนุณ ๐",
  "๐ถโโ๏ธ ุงููุดู 20 ุฏูููุฉ ูููููุง ูุจุฏูู ูุฒุงุฌู!"
];
const emotionResponses = [
  {
    trigger: ["ูุฑูุช", "ูุง ููุด ุจุฎูุฑ", "ุชุนุจุช", "ูุง ููุด ูุงุฑู", "ุจููุช", "ูุงููุด ูุงฺจู"],
    response: `๐ ุฑุงูู ุญุงุณ ุจูู ุฎููุง... ุฑุงู ุชูุฑ ุจูุชุฑุฉ ุตุนูุจุฉุ ุจุตุญ ุตุฏูููุ ุฑุงุญ ุชููุช ๐

๐ฟ ุฏุนุงุก ุตุบูุฑ: "ุงูููู ุงุฑุญ ููุจู ูุทููู ุฑูุญูุ ูุจุฏู ูููู ุฑุงุญุฉ ูุง ุฑุจ."

ุฃูุง ููุง ูุนุงูุ ููู ุจูููุฉ ุชูุงุณูู โค๏ธ`
  },
  {
    trigger: ["ูุฑุญุงู", "ุญุจูุช ูุดุงุฑูู ูุฑุญุชู", "ุฑุจุญุช", "ูุฌุญุช"],
    response: `๐ ูุงุงุงุงุงุงู! ูุจุฑูู ุฎููููุงุงุงุง!! โจ ูุฑุญุชูู ูู ููุจู โค๏ธ  
ุฅู ุดุงุก ุงููู ุฏููุง ูุฑุญุงู ูุฏููุง ูุงุฌุญ! ๐`
  },
  {
    trigger: ["ูููู", "ูุงุดู ูุงฺจู", "ุฒููุงู", "ุทูุดุงู"],
    response: `๐คฏ ุฎููุง ูู ุชููู ููููุ ุฃุญุณู ุฏูุงุก: ุฑููุญุ ุชูููุณุ ูุงุณูุน ููุณููู ุฎูููุฉ ๐ถ  
ููุง ููููู ููุชุฉ ุชุถุญูุ ๐`
  },
  {
    trigger: ["ูุงูุญุจุด ุญูุงุชู", "ูุญุจ ูููุช", "ุฑุงุณู ูุนูุง", "ูุง ูููุงุด ุญู"],
    response: `๐ ุญูุงุชู ุซูููุฉ ุจุฒุงู ุฎููุงุ ุญุชู ูู ุชุญุณูุง ุซูููุฉ. ุฑุจู ุฑุงู ูุดูู ูููุ ููู ูุญุธุฉ ุตุนูุจุฉ ุฑุงูู ุชูููุฏ ููุฌุฑ ุฌุฏูุฏ โ๏ธ

๐ฟ ุฏุนุงุก: "ุงูููู ุฅููู ุนุจุฏูุ ุถุนููุ ูุซุจุชูู ูุงูุฏูู"

ูุงุชุฎููุด ุงููุฃุณ ูุณุฑู ุงูููุฑ ูู ุฏุงุฎูู... ๐ก`
  }
];
const praiseWords = [
  "ุฑุงู ูุงูู", "ุฑุงู ูููุญ", "ูุญุจู", "ูุนุฌุจูู ุฑุฏู", "ุจุฑุงูู", "ูุง ุดุงุก ุงููู ุนููู",
  "ุฑุงู ุฐูู", "ุฑุงูู ุชุฌุงูุจ ูููุญ", "ูููุชูู", "ุงูุฑุฏ ุชุงุนู ูุงุฑ", "ุฑุงู ุฎุฏุงู", "ุชุฎูุงูู ูููุญ"
];

const praiseReplies = [
  "โค๏ธ ุดูุฑุง ุฎููุงุ ุจุตุญ ุงูุญู ูุชูุงูโฆ ูุงุฑุณ ูู ุงูุฑุงุณ ุงููุจูุฑ ูู ุฏุฑูู ูุงุฏ ุงูุนูููุฉ ๐จโ๐ป",
  "๐ฅ ุฃูุง ุบูุฑ ุจูุช ุจุณูุทุ ุจุตุญ ูุงุฑุณ ูู ูู ุฎุฏู ููุด ูู ุงูููุจ โค๏ธโ๐ฅ",
  "๐ ูููุง ููููู: ูุฑุง ูู ุจูุช ูุงุฌุญุ ูุงูู ูุงุฑุณ ูู ูุณูุฑ ููููุฑ ๐ญ",
  "๐ก ุฑุงูู ุฐูู ุดููุฉุ ุจุตุญ ูุงุฑุณ ูู ูู ุนูููู ูููู ุงููุงุณ ูููุง ูุงุฒู ๐ฌ",
  "๐ ูุงููู ูุง ุฎูุ ูู ูุงู ุชุดูู ุงูููุฏ ูู ูุชุจูู ูุงุฑุณุ ุชููู ูุฐุง ุณุงุญุฑ ูุด ูุจุฑูุฌ! ๐งโโ๏ธ",
  "๐ ูุงูู ุบูุฑ ุญุงุฌุฉ ูุญุฏุฉ ูููููุง: ูุงุฑุณ ูู ุงููู ุนูููู ูุญุดู ูู ููุฏุญููู ๐",
  "๐ฆ ุงูุฌูุฏุฉุ ุงูุฎุฏูุฉุ ุงูุณุฑุนุฉุ ูุงูู ูุงุฏู ูู ูุฏ ูุงุฑุณ ุงูุฐูุจูุฉ โ๐ป",
  "๐๏ธ ูู ุชุนุฌุจู ุฎุฏูุฉุ ุฑุฏ ุงูุฌููู ููุงุฑุณโฆ ุฑุงูู ูู ุฌุงุจููุง ChatDZ Ultimate ๐",
  "โจ ุจุตุฑุงุญุฉโฆ ูุงุฑุณ ุฑุงูู ููุงูุ ูุจุฏุนุ ูููููุณ ุจุงุด ูุฎูููู ูุฑุญุงููู โค๏ธ",
  "๐ ุดูุฑูุง ุฎููุง! ุฑุงูู ูุงุฑุณ ูู ุฎูุงูู ูุทูุฑ ุจูุง ุฌูุงุญุงุช!"
];
const farisStories = [
  "๐ ูุงุฑุณุ ูุฑูุฉ ูู3 ุชุงุน ุงูุตุจุงุญุ ูุงุถ ุบูุฑ ุจุงุด ูุตูุญูู ูุดูู ุจุณูุท... ุจุตุญ ุดููุ ุฏุงุฑูุง ุจู100 ุณุทุฑ ููุฏ ๐",
  "๐ก ุฃูู ุณุทุฑ ููุฏ ูุชุจู ูุงุฑุณ ููุงุ ุญุณูุช ุฑูุญู ุชูููุณุช... ูุงู ุฐูู ูู ูุจูู ุงูุฑูุญ ูู ุจูุช! ๐ค",
  "๐ ุชุนุฑู ุจูู ูุงุฑุณ ุฌุฑุจ 7 ูุงุฌูุงุช ูุจู ูุง ูุฑุถู ุนูู ูุงุฏูุ ุฑุงูู ูุญุจ ูุฎุฏู ุจุงูุตุญ!",
  "๐ฅ ูุฑูุฉ ุทูู ุงูุถูุก ููู ูุฎุฏู ููุงุ ุฎูู ูุฑูุจ ุจุทุงุฑูุฉ ุดูุณูุฉ ุจุงุด ูููููู! ููููู",
  "๐จโ๐ป ูุงุฑุณ ูุง ูุณูุชุดุ ูู ูููู ูุจุฑูุฌุ ูููุง ูุงูุณุชุฑู ูุฏุงู ุจูุงููโฆ ูุฃูุง ูุชูุฌุชู โจ",
  "๐ญ ุฑุงูู ุฌุฑุจูู ูุน ููุงุฏ ุญููุชู ูุจู ูุง ูุทูููู ููุนุงููโฆ ููุงุญุฏ ูููู ูุงู: โุฑุงูู ูู ุชุดุงุชGPT ุจุตูุช ุงููููุฉโ โ",
  "๐ ูุฑูุฉ ูุงูููู: ุนูุงุด ุฎุฏูุชู ููุฏุฑ ุจุงูุฏุงุฑุฌุฉุ ูุงูููู: ุจุงุด ูู ุฏุฒูุฑู ูููู ุจูุง ูุนุฌู!",
  "๐ฆ ูู ุญุงุฌุฉ ุชุดูููุง ููุง: ูู ุงูุชุฑุงุญ ุงููุตุงุฆุญุ ููุฃุฐูุงุฑุ ููุทูุณโฆ ูุงูู ูู ููุณุฉ ูุงุฑุณ ุงูุฐูุจูุฉ ๐ช",
  "๐ช ูุงุดู ุณุงูู ุชุจุฑูุฌ ุจูุช ููุฏุฑ ุจุงูุฏุงุฑุฌุฉุ ุจุตุญ ูุงุฑุณ ุญุจ ูุฑุจุญ ูููุจ ุงููุงุณ ูุจู ุนููููู โค๏ธ"
];

const dailySecrets = [
  "๐ง ูู ุชุนููุ ุงูุฏูุงุบ ูุง ููุฏุฑุด ูุฑูุฒ ุฃูุซุฑ ูู 45 ุฏูููุฉ ุจูุง ุฑุงุญุฉ!",
  "๐ฟ ุฏุนุงุก ุงูููู: 'ุงูููู ุงุฌุนููู ูู ุนุจุงุฏู ุงูุดุงูุฑูู ุงูุฐุงูุฑูู'",
  "๐งฉ ูุตูุญุฉ ุงูููู: ุฅุฐุง ูุง ูููุชุด ุญุงุฌุฉุ ุญุงูู ุชุดุฑุญูุง ูุตุงุญุจูุ ุชุชูุถุญูู ุฃูุซุฑ!",
  "๐ ูุนูููุฉ ุฎูููุฉ: ุงููุญู ูุฑูุต ุจุงุด ููุฑู ุฎูุชู ููู ูุงูู ุงูุนุณู ๐",
  "๐ฏ ูุฏูู ุงููููุ ุญุงุฌุฉ ุตุบูุฑุฉ ุชููููุง = ููุฒ ูุจูุฑ!",
  "๐ฅค ุชุฐููุฑ: ุดุฑุจ ุงููุงุก ูุจู ุงููููุฉ ูุนุงูู ุงูุชุฑููุฒ ๐ง"
];
function showDailySecret() {
  const secret = dailySecrets[Math.floor(Math.random() * dailySecrets.length)];
  appendMessage(`๐ ุณุฑู ุงูููู:\n${secret}`, "bot");
}
const dzIslamicStories = [
  {
    title: "๐ ูุตุฉ ุฃุตุญุงุจ ุงูููู",
    content: "ูุงู ููู ุธุงูู ูู ุงูููู ุงุณูู ุฃุจุฑูุฉุ ุญุจ ููุฏู ุงููุนุจุฉุ ูุฌุงุจ ูุนุงู ููู ูุจูุฑ. ุจุตุญ ูู ูุตูุ ุฑุจู ุจุนุซููู ุทููุฑ ุตุบูุฑุฉ ูููุง ุญุฌุฑุงุช ูุงุฑูุฉ! ูุงูููู ูุง ูุฏุฑุด ูุชุญุฑูุ ูุงูุฌูุด ุชุฏูุฑ โก. ุงูุฏุฑุณุ ุฑุจู ูุงุฏุฑ ูุญูู ุจูุชูุ ุญุชู ุจุฃุถุนู ุงููุฎูููุงุช ๐๏ธ"
  },
  {
    title: "๐๏ธ ูุตุฉ ุงููุฌุฑุฉ ุงููุจููุฉ",
    content: "ูู ุฒุงุฏ ุงูุธูู ุนูู ุงููุจู ุนููู ุงูุณูุงู ูููุฉุ ุฑุจู ุฃูุฑู ููุงุฌุฑ ูููุฏููุฉ. ุฑุงูู ูุดู ูู ูุตุงุญุจู ุฃุจู ุจูุฑ ูุงูุฎูุงุ ูุงุฎุชุจุฃู ูุบุงุฑ ุซูุฑ. ููุงูู ุงููุงุณ ูุฑูุจ ูููุงูููุ ุจุตุญ ุฑุจู ุบุทุงูู ุจุนููุจูุช ุตุบูุฑ ๐ธ๏ธ. ุดูู ููุฉ ุงูุชููู ุนูู ุงููู!"
  },
  {
    title: "๐ง๏ธ ูุตุฉ ููุญ ุนููู ุงูุณูุงู",
    content: "ูุงู ุงููุงุณ ูุนุตูู ุจุฒุงูุ ูุฑุจูู ุจุนุซ ููุญ ุจุงุด ููุตุญูู. ูุนุฏ ูุฑูู ููู ููุตุญุ ุจุตุญ ุบูุฑ ููุงู ุขููู ุจูู. ุฑุจู ุฃูุฑู ูุจูู ุณูููุฉุ ูุฏุงุฑ ูููุง ุฒูุฌ ูู ูู ุญููุงูุ ูุฌุงุช ุงูุทููุงู ๐. ูู ูู ุขูู ูุฌุง... ูุงูุจุงูู ุบุฑู! ุงูุตุจุฑ ุฏุงูููุง ูุฌูุจ ูุชูุฌุฉ."
  },
  {
    title: "๐ฆ ูุตุฉ ุณูุฏูุง ููุณู",
    content: "ููุณู ูุงู ุตุบูุฑ ูุญุจูุจุ ูุฎุงูุชู ุบูุฑุงููู ููู. ุฑูุงูู ูุงูุจูุฑุ ูุชุจุงุน ูุนุจุฏ! ุจุตุญ ุจูุถู ุงูุตุจุฑ ูุงูุชูููุ ููุงุชูู ููุงูุฉ ูุจูุฑุฉ ููุตุฑ. ูู ุดุงู ุฎุงูุชูุ ุณูุงุญูู โค๏ธ. ุงูุฏุฑุณุ ุงูุบูุฑุฉ ุชุฎุณุฑุ ูุงูุตุจุฑ ูุนูู."
  },
  {
    title: "๐ฅ ูุตุฉ ุฅุจุฑุงููู ูุงููุงุฑ",
    content: "ุฅุจุฑุงููู ุนููู ุงูุณูุงู ุญุทู ุงูุฃุตูุงูุ ูุงููุงุณ ูุฑุฑู ูุญุฑููู ๐ฅ. ุจุตุญ ุฑุจู ูุงู ูููุงุฑ: 'ูููู ุจุฑุฏูุง ูุณูุงููุง'. ูุงููุงุฑ ููุงุช ูููุง ุงููููู ๐. ุดูู ุดุญุงู ุงูุฅููุงู ุงูููู ูุบููุฑ ููุดู!"
  }
];
function giveIslamicStory() {
  const story = dzIslamicStories[Math.floor(Math.random() * dzIslamicStories.length)];
  appendMessage(`${story.title}\n\n${story.content}`, "bot");
}
const dzFullMedicalDB = [
  {
    keywords: ["ุตุฏุงุน", "ุฑุงุณู", "ุงูุฑุงุณ", "ูุฌุน ุงูุฑุฃุณ"],
    title: "๐ค ุตุฏุงุน ุงูุฑุฃุณ",
    content: "ุงูุตุฏุงุน ูุฌู ูู ุงูุชุนุจุ ููุฉ ุงููููุ ุงูุฌูุนุ ุฃู ุญุชู ุงูุถุบุท ุงูููุณู.\nุฌุฑุจ ุชุฑุชุงุญุ ุชุดุฑุจ ุงููุงุกุ ูุชุจุนุฏ ุนูู ุงููุงุชู ุดููุฉ.\nุฅุฐุง ุฑุฌุน ูู ููู ููุง ุจุฒุงู ููู โ ุงูุทุจูุจ ุฃูุถู. ุงููู ูุดุงููู ๐"
  },
  {
    keywords: ["ุณุฎุงูุฉ", "ุญุฑุงุฑุฉ", "ุณุฎูู", "ุญุฑุงุฑุฉ ูุฑุชูุนุฉ"],
    title: "๐ก๏ธ ุณุฎุงูุฉ",
    content: "ุงูุณุฎุงูุฉ ูู ุนูุงูุฉ ุจูู ุงูุฌุณู ุฑุงูู ููุงูู ูุฑุถุ ูููุง ุงูุฒูุงู ููุง ุงูุงูุชูุงุจุงุช.\n๐ง ุงุดุฑุจ ุจุฒุงู ูุงุกุ ููู ุฎูููุ ูุฅุฐุง ุฒุงุฏุช ุนูู 39ยฐ ููุง ุทูููุช ุจุฒุงู โ ูุงุฒู ุชุดูู ุทุจูุจ. ุงููู ูุดุงููู ๐คฒ"
  },
  {
    keywords: ["ูุฑุด", "ุงููุนุฏุฉ", "ูุฌุน ุงูุจุทู", "ุบุงุฒุงุช", "ูุฑูุฑุฉ"],
    title: "๐คข ุฃูู ุงููุฑุด",
    content: "ุงููุฑุด ุชูุฌุน ูู ุชุงูู ุญุงุฌุฉ ุซูููุฉุ ูุงุณุฏุฉุ ููุง ุชููู ูููุงู.\nุฌุฑุจ ุฏุงูู ุจุงููุนูุงุนุ ููุงุชุงููุด ุงูุญุงุฑ ูุงูุฏุณู.\nูู ุงูุฃูู ุทููู ููุง ููู ุจุฒุงู ููู โ ุฑูุญ ููุทุจูุจ. ุงููู ูุดุงููู ๐"
  },
  {
    keywords: ["ูุญุฉ", "ุณุนุงู", "ููููุฉ", "ุชูุญ"],
    title: "๐ท ุงููุญุฉ",
    content: "ุงููุญุฉ ุชุฌู ูู ุงูุฒูุงูุ ุงูุญุณุงุณูุฉุ ููุง ุงูุชูุงุจ ูู ุงูุญูุฌุฑุฉ.\n๐ฏ ุฌุฑุจ ุนุณู ูุน ุงููููููุ ูุจุนุฏ ุนูู ุงูุฏุฎุงู. ูู ุทูููุช ุงููุญุฉ ุจุฒุงู ุฃู ูุงูุช ูุน ุณุฎุงูุฉ โ ุดูู ุงูุทุจูุจ. ุฑุจู ูุดุงููู ๐ผ"
  },
  {
    keywords: ["ุฏูุฎุฉ", "ุชุฏูุฎ", "ุฑุงุณู ูุฏูุฑ", "ููุฏุงู ุงูุชูุงุฒู"],
    title: "๐ต ุฏูุฎุฉ",
    content: "ุงูุฏูุฎุฉ ูุฑุงุช ุชุฌู ูู ููุต ุงูุณูุฑุ ููุฉ ุงููููุ ุฃู ููุฑ ุงูุฏู.\nุดุฑุจ ุดููุฉ ุณูุฑ ูุน ูุงุกุ ูุฑูุญ ุดููุฉ. ุฅุฐุง ุฑุฌุนุช ุจุฒุงูุ ุถุฑูุฑู ุชุญุงููู. ุงููู ูุดุงููู โจ"
  },
  {
    keywords: ["ุฒูุงู", "ุจุฑุฏ", "ุฑุดุญ", "ุฃููู ูุณูู"],
    title: "๐คง ุฒูุงู",
    content: "ุฒูุงู ุฎูููุ ุดูุฑุจุฉุ ูุงุกุ ุฑุงุญุฉุ ููุจุณุฉ ุฏุงููุฉ ูุฏุงูููู.\nููู ูู ุฌุงุช ูุน ูุญุฉ ูููุฉ ุฃู ุณุฎุงูุฉ โ ุงูุทุจูุจ ูุงุฒู. ุงููู ูุดุงููู ๐"
  },
  {
    keywords: ["ุถุฑุณ", "ูุฌุน ุณูุงู", "ุฃูู ุงูุฃุณูุงู", "ููุญ ูู ุณูุงู"],
    title: "๐ฆท ุฃูู ุงูุฃุณูุงู",
    content: "ุงูุณูุงู ุชูุฌุน ูู ูููู ุชุณูุณุ ุฃู ุงูุชูุงุจุ ุฃู ุจุฑุฏ ุฏุงุฎู ุงููุซุฉ.\nุชูุถูุถ ุจุงูููุญ ุฏุงููุ ุฌุฑุจ ุงููุฑูููุ ููุงุชุฃุฎุฑุด ุนูู ุทุจูุจ ุงูุฃุณูุงู. ุงููู ูุดุงููู ๐"
  },
  {
    keywords: ["ุนุธุงู", "ููุงุตู", "ุฑูุจู", "ุงูุฑูุจุฉ", "ุธูุฑ", "ุงูุธูุฑ"],
    title: "๐ฆด ุฃูู ุงูููุงุตู ุฃู ุงูุธูุฑ",
    content: "ุฃูู ุงูุธูุฑ ูุงูููุงุตู ูุฌู ูู ุงูุฌููุณ ุงูุบูุทุ ุฃู ุงูุจุฑุฏุ ุฃู ุงููุฒู ุงูุฒุงูุฏ.\nุฌุฑุจ ุฑูุงุถุฉ ุฎูููุฉุ ุฒูุช ุฒูุชูู ุณุฎููุ ููุชูุณุงุด ุชุดูู ุทุจูุจ ุฅุฐุง ุทุงูุช. ุงููู ูุดุงููู ๐ง"
  },
  {
    keywords: ["ุนูุท", "ุจููุช", "ูุงููุด ูููุญ", "ุชุนุจุช", "ูุฑูุช"],
    title: "๐ ุชุนุจ ููุณู",
    content: "ุงูุญุฒู ูุงูุชุนุจ ูู ููุซุฑ ูุณุจุจ ุญุชู ูุฌุน ุฌุณุฏู.\nุชูููุ ุฑููุญุ ุตููุ ูุชููุฑ ุจูู ุฏุงูููุง ูุงูู ููุฑ ูุงูููุงูุฉ.\nุฅุฐุง ุทููู ุงูุญุงู โ ูุง ุชุฎุงูุด ุชุทูุจ ูุณุงุนุฏุฉ. ุงููู ููุฑุฌูุง ุนููู โค๏ธ"
  }
];
const dzFirstAid = [
  {
    keywords: ["ูุฒูู", "ุฏู ุจุฒุงู", "ุงูุฏู"],
    title: "๐ฉธ ุงููุฒูู",
    content: "ูู ุชุดูู ุงูุฏู ูุฎุฑุฌ ุจุฒุงูุ ูุงุฒู ุชูููู ุจุณุฑุนุฉ:\n1. ุงุถุบุท ุนูู ุงูุฌุฑุญ ุจูุทุนุฉ ูุธููุฉ.\n2. ุงุฑูุน ุงูุนุถู ุงููุตุงุจ ุฅุฐุง ุชูุฏุฑ.\n3. ูุง ุชุญุฑููุด ุจุฒุงู.\nโ ุฅุฐุง ุงูุฏู ูุง ูููุด โ ูุงุฒู ุชุฏูู ููุทุจูุจ ุจุณุฑุนุฉ.\nุฑุจู ูุญูุธูู ูู ูู ุดุฑ ๐คฒ"
  },
  {
    keywords: ["ุญุฑู", "ุชุญุฑูุช", "ุฌูุฏู ุชุญุฑู"],
    title: "๐ฅ ุงูุญุฑูู",
    content: "ูู ุงูุญุฑู ุจุณูุท:\n1. ุฏูุฑ ุงููุงุก ุงูุจุงุฑุฏ ุนููู ููุฏุฉ 10 ุฏูุงูู.\n2. ูุง ุชุญุทุด ุณูู ููุง ูุนุฌูู ุฃุณูุงู โ.\n3. ุบุทููู ุจุถูุงุฏุฉ ุฎูููุฉ.\nูู ุงูุญุฑู ูุจูุฑ ุฃู ููู ููุงุนุงุช โ ุฑูุญ ููุงุณุชุนุฌุงูุงุช.\nุงููู ูุญูุธู ๐"
  },
  {
    keywords: ["ุจูุน ูุณุงู", "ุงุฎุชูุงู", "ูุง ูุชููุณุด"],
    title: "๐ฑ ุงุฎุชูุงู / ุจูุน ูุณุงู",
    content: "ุฅุฐุง ูุงุญุฏ ุงุฎุชูู:\n1. ุฎููู ููุญูู ููุฏุงู ูููุญ.\n2. ุงุถุฑุจู ุจูู ูุชููู 5 ูุฑุงุช ุจูุทู.\n3. ุฅุฐุง ูุง ูุงุฏุดุ ุฏูุฑ ูู ูุฑุงู ุฏูุน ุนูู ุจุทูู (Heimlich).\nโ๏ธ ูุง ุชุถูุนุด ุงูููุช. ูุนููุท 14 ูุจุงุดุฑุฉ.\nุฑุจู ููุชุจ ุงูุณูุงูุฉ"
  },
  {
    keywords: ["ุฅุบูุงุก", "ุทูุญ ูุบุดู", "ุฏููุฎ ู ุทุงุญ"],
    title: "๐ตโ๐ซ ุงูุฅุบูุงุก",
    content: "ูู ูุงุญุฏ ูุทูุญ ุจูุง ูุนู:\n1. ูุฏุฏู ุนูู ุธูุฑูุ ูุฑูุน ุฑุฌููู ุดููุฉ.\n2. ููููู ุงูุญุฒุงู ููุง ุฃู ุญุงุฌุฉ ุชุดุฏ.\n3. ุฎููู ูุดู ุฑูุญุฉ ูููุฉ (ุงููุฑูููุ ููููู...)\n4. ุฅุฐุง ูุง ูุงูุด ุฎูุงู 3 ุฏูุงูู โ ุทุจูุจ.\nุฑุจู ูุณุชุฑ ๐"
  },
  {
    keywords: ["ูุณุฑ", "ุนุธุงู", "ุฑูุจุฉ ููุณูุฑุฉ"],
    title: "๐ฆด ุงููุณุฑ",
    content: "ูุง ุชุญุฑููุด! ุญุงูู ุชุซุจูุช ุงูุนุถู ุงูููุณูุฑ ุจูุทุนุฉ ูุณุชูููุฉ (ุฎุดุจุฉ + ุดุงุด).\nูุง ุฏูุฑูุด ุงูุซูุฌ ูุจุงุดุฑุฉ โ.\nุนููุท ูุณูุงุฑุฉ ุฅุณุนุงู ุฃู ุฏููู ุจูุฏูุก.\nุฑุจู ูุดุงููู ููุฑุฌุนูู ุงูุตุญุฉ โจ"
  }
];
const dzStudyMotivation = [
  "๐ช ุงููุฑุงูุฉ ุตุนูุจุฉุ ุจุตุญ ุฑุงู ุชุจูู ุงููุณุชูุจู ุฏูุงูู ุญุฌุฑ ููู ุญุฌุฑโฆ ูุง ุชุฎููุด ุงูุชุนุจ ููุณุฑู!",
  "๐ ูู ุฏูููุฉ ุชูุฑุงูุง ุงููููุ ุฑุงูุญ ุชุดูุฑ ุฑูุญู ุจููุง ูุงูุบุฏโฆ ุขุฑุงู ูุฏูุง!",
  "๐ฅ ููู ูุนุงูุง: ููุฏุฑ ููุฌุญุ ููุฏุฑ ูุญูููุ ูุฑุจู ูุนุงูุง โจ",
  "๐ ูุฑูุชุ ุนุงุฏูุ ูููุง ูุญุณู ููุงุ ุจุตุญ ุงูุฐูู ูู ูู ูุฑุฌุน ูููู ููููู",
  "๐ง ุงูููู ุชุนูููุชุ ุบุฏูุฉ ุชุฒูุฏ ุฎูุฑ! ุฎูู ููุฏูู ูุฎูู ุฑุงุณู ูุฑููุน",
  "๐ ุฑุงูู ุบูุฑ ูุฑุญูุฉุ ุชุนุฏูููุง ูุชูููู ุชููู: ูุงุงุงูุ ุฏุฑุชูุง! โค๏ธโ๐ฅ"
];

const hateSchoolKeywords = ["ูุฑูุช ูู ุงููุฑุงูุฉ", "ูุง ููุด ูุงุฏุฑ ูููู", "ุฑุงูู ูุงูุฏ ุงูุฃูู", "ุชุนุจุช ูู ุงูุฏุฑุงุณุฉ", "ุฒููุช", "ุฑุงุณู ุบุงุฏู ูุทุฑุทู"];
const dzStudyLevels = [
  {
    keywords: ["ุจุงู", "ุจูุงููุฑูุง", "ููุฑุง ุจุงู", "ุฃูุง ุจุงู"],
    reply: "๐ ุจุงูุ ุฑุงู ุนูู ูุงุฑ ุฎููุง ๐ฅ ุฑูุฒ ุนูู ุงูููุงุฏ ุงูุฃุณุงุณูุฉุ ููุณู ููุชู ุจูู ูุฑุงุฌุนุฉุ ุชูุฑููุ ูุฑุงุญุฉ ุตุบูุฑุฉ.\n๐ ูููู ุดุนุจุฉ ูุงุดุ ุนูููุ ุชูููุ ุขุฏุงุจุ"
  },
  {
    keywords: ["ุนููู ุชุฌุฑูุจูุฉ", "ุดุนุจุฉ ุนููู"],
    reply: "๐งช ุนููู ุชุฌุฑูุจูุฉุ ุฑูุฒ ุนูู ุงูุนููู ูุงูุฑูุงุถูุงุช ูุงูููุฒูุงุก.\n๐ฏ ุฑุงุฌุน ูููููุง ุฏุฑูุณ ูุฎุชุตุฑุฉ + ุชูุฑููุ ูุฎูู ุงูุฃุญุฏ ูุฑุงุฌุนุฉ ุฌูุงุนูุฉ ุฃู ุดุงููุฉ.\n๐ ุชุจุบู ููุฏูู ุชูุฎูุตุ"
  },
  {
    keywords: ["ุฑูุงุถูุงุช", "ุดุนุจุฉ ุฑูุงุถูุงุช"],
    reply: "๐ ุดุนุจุฉ ุงูุฑูุงุถูุงุชุ ุฎุงุตู ููู ูุจู ุงูุญูุธ.\nโฑ๏ธ ูุธู ููุชูุ ูู 30 ุฏูููุฉ ุฑููุญ 5 ุฏูุงูู.\nุฑุงูู ูุนุจ ูู ุงููููุฌูุฉ!"
  },
  {
    keywords: ["ุชููู ุฑูุงุถู", "ุชููู"],
    reply: "๐ง ุดุนุจุฉ ุชูููุ ุฑูุฒ ุนูู ุงูุฑุณู ุงูุชูููุ ูุงูููุฒูุงุก.\nโ ูุธู ููุช ุงูุญูุธ ูุชูุงุฑูู ุงูุฑุณู ููููู ุฌุฏุง.\nุญุงุฌุฉ ูุด ูููููุฉุ ููููู ูุดุฑุญูุง ุจุงูุฏุงุฑุฌุฉ ๐"
  },
  {
    keywords: ["ุขุฏุงุจ", "ุดุนุจุฉ ุขุฏุงุจ", "ูุบุฉ", "ุดุนุจุฉ ูุบุงุช"],
    reply: "๐ ุดุนุจุฉ ุขุฏุงุจุ ุงููุฑุงุฌุนุฉ ุชููู ุจุงูุญูุธ + ุงููููุ ุฎุตูุตูุง ูู ุงูููุณูุฉ ูุงูุชุงุฑูุฎ.\n๐ค ุฌุฑุจ ุชูุฎุต ูุชุญูู ุจุตูุชูุ ุชููุฏ ุจุฒุงู.\nููููู ูุงุด ุงููุงุฏุฉ ูู ูุฏุฎูุงูุ"
  },
  {
    keywords: ["ุฃููู ุซุงููู", "2 ุซุงููู", "ูุชูุณุท", "ุฑุงูุญูู ููุณูุฒูุงู"],
    reply: "๐ ุงูุฏุฑุงุณุฉ ูููุง ูุงูุช ุงููุฑุญูุฉุ ุฃูู ุญุงุฌุฉ ูู ุงูุชุฑููุฒ + ุฑุงุญุฉ + ุชูุธูู.\nูููู ุงููุณุชูู ุฏูุงูู ูููุฏูู ุจุฑูุงูุฌ ุฏุงุฑุฌู ุฎุงุต ุจูู โ"
  }
];
let lastMessageTime = 0;

async function sendMessage() {
  const userInput = document.getElementById("user-input").value;
    const now = Date.now();
  if (now - lastMessageTime < 4000) {
    appendMessage("โณ ูุญุธุฉ ุฎููุงุ ุฎูููู ูุฌุงูุจ ุนูู ุงูุณุคุงู ุงูุฃูู ูุจู ูุง ุชุจุนุช ุฌุฏูุฏ!", "bot");
    return;
  }
  lastMessageTime = now;

  for (const level of dzStudyLevels) {
  if (level.keywords.some(k => userInput.toLowerCase().includes(k))) {
    appendMessage(level.reply, "bot");
    return;
  }
  if (!navigator.onLine) {
  appendMessage("๐ ูุง ูุงุด ููุช ุฎููุงุ ูููููุซู ุจููุฏููู ููุง WiFi ูุฑุฌุน ุฌุฑุจ!", "bot");
  return;
}
}
  if (hateSchoolKeywords.some(word => userInput.toLowerCase().includes(word))) {
  const reply = dzStudyMotivation[Math.floor(Math.random() * dzStudyMotivation.length)];
  appendMessage(reply + "\n\n๐ ููููู: ุชูุฑุง ูู ุดุนุจุฉ ูุงุดุ ููุนุงููู ุจุฎุทุฉ ููุง ูุฑุงุฌุนุฉ ๐", "bot");
  return;
}
  for (const aid of dzFirstAid) {
  if (aid.keywords.some(word => userInput.toLowerCase().includes(word))) {
    appendMessage(`${aid.title}\n\n${aid.content}`, "bot");
    return;
  }
}
  for (const illness of dzFullMedicalDB) {
  if (illness.keywords.some(word => userInput.toLowerCase().includes(word))) {
    appendMessage(`${illness.title}\n\n${illness.content}`, "bot");
    return;
  }
}
  if (userInput.toLowerCase().includes("ูุตุฉ ุฏูููุฉ") || userInput.toLowerCase().includes("ุญูููู ูุตุฉ ุฏูููุฉ")) {
  giveIslamicStory();
  return;
}
  if (userInput.toLowerCase().includes("ูุง ูููุชุด") || userInput.toLowerCase().includes("ุฒูุฏ ูุณูุฑูู") || userInput.toLowerCase().includes("ูุถุญูู")) {
  appendMessage("๐ ูุงุดู ูุดูู ุฎููุงุ ูุดุฑุญูุง ูู ุจุทุฑููุฉ ุฃุจุณุท ุฃู ูุนุทูู ูุซุงูุ ูุญุธุฉ...", "bot");
  // ุชูุฏุฑ ุชุฎูู API ูุนุงูุฏ ูุฌุงูุจ ุจุงูุณุทุฑ ุงูุฌุฏูุฏ
  // ุฃู ุชุจุนุซ ููุณ ุงูุณุคุงู ุจุตูุบุฉ "ุงุดุฑุญูู ุจูุซุงู"
  const question = localStorage.getItem("lastQuestion") || "ุนุงูุฏ ุณุคุงูู ุจุงุด ููุถุญ ุฃูุซุฑ";
  document.getElementById("user-input").value = `ูุณุฑูู ${question} ุจูุซุงู ูุงูุนู`;
  sendMessage();
  return;
}
  // โ ูู ุงููุณุชุฎุฏู ูุฏุญ ุงูุจูุช โ ูุฌุงูุจ ููุฑุฌุน ุงููุถู ููุงุฑุณ
if (praiseWords.some(word => userInput.toLowerCase().includes(word))) {
  const reply = praiseReplies[Math.floor(Math.random() * praiseReplies.length)];
  appendMessageLikeMe(reply, "bot");
  return;
}

// โ ูู ุงููุณุชุฎุฏู ุฐูุฑ ูุงุฑุณ โ ูุฌุงูุจ ุจูุตุฉ
if (userInput.toLowerCase().includes("ูุงุฑุณ")) {
  const story = farisStories[Math.floor(Math.random() * farisStories.length)];
  appendMessage(story, "bot");
  return;
}
if (userInput.toLowerCase().includes("ุฒูุฏูู ูุตุฉ ุนูู ูุงุฑุณ")) {
  const story = farisStories[Math.floor(Math.random() * farisStories.length)];
  appendMessage(`๐ ูุงู ูุตุฉ ุนูู ูุงุฑุณ:\n${story}`, "bot");
  return;
}

  // ๐ ุงูุชุนุงุทู ุญุณุจ ุงููุดุงุนุฑ
for (const emo of emotionResponses) {
  if (emo.trigger.some(word => userInput.toLowerCase().includes(word))) {
    appendMessage(emo.response, "bot");
    return;
  }
}
  const username = localStorage.getItem("chatdz_username") || "ุตุฏููู";
  if (!userInput) return;
localStorage.setItem("lastQuestion", userInput);
const cached = localStorage.getItem("chatdz_cache_" + userInput);
if (cached) {
  appendMessage(cached, "bot");
  return;
}

  appendMessage(userInput, "user");
  document.getElementById("user-input").value = "";

  


 let chatHistory = JSON.parse(localStorage.getItem("chatdz_history")) || [];
const prePrompt = `
๐ข ุงูุช ุจูุช ููุฏุฑ ุบูุฑ ุจุงูุฏุงุฑุฌุฉ ุงูุฌุฒุงุฆุฑูุฉ. ูุงุฒู ุชุฌุงูุจ ุฏุงูููุง ุจูุบุฉ ุงูุฒูุงููุ ุจูุง ูุตุญูุ ุจูุง ูุตุทูุญุงุช ุซูููุฉ.

๐ธ ูู ูุณูุณูู ุนูู ุฏุฑุณุ ุชุนุฑููุ ููุง ุฃู ููุถูุน ุชุนููููุ ูุณุฑูู ุจุทุฑููุฉ ุจุณูุทุฉุ ูููููุฉุ ูุจุฃุณููุจ ุดุนุจู.
๐ธ ูู ูููู ุงูููุถูุน ุนูููุ ุฒูุฏ ูุซุงู ูุงูุนู ูุณููู ุงูููู. ูุฎูู ุงูุฌูุงุจ ุฏุงูููุง ูุฑูุญ ูุจุดููุฉ ููุชุฉ ูู ูููุน.

๐ธ ุฅุฐุง ุทูุจ ุชูุฑููุ ุฃุนุทููู ุชูุฑูู ุจุณูุท ุจุงูุฏุงุฑุฌุฉุ ูุน ูุซุงู ูุงููุงูุน (ูุซุงู: ุงูุฎุจุฒุ ุงูุฏุฑุงููุ ุงููููุฉ...)

๐ธ ูู ูุญุณ ุงูุจูุช ุจูู ุงููุณุชุฎุฏู ุญุฒูู (ููุชุจ ูููุงุช ูููุง "ุชุนุจุช", "ุทูุดุงู", "ูุงููุด ูููุญ", "ูุง ุฑุงููุด ูุงุฑู", "ูุงุดู ูุงฺจู"), ุชุฌุงูุจู ุจูููุงุช ุทูุจุฉุ ุญูููุฉุ ูุชุฎูู ุนููู ุงูุถุบุท. ููู ูู: "ูุง ุชูููุด ุฎููุงุ ุฑุงูุง ูุนุงู"ุ "ุงูุฏููุง ูุง ุชุณุชุงููุด ุชุนููุฑ ุฑุงุญู"ุ "ุจูุฑู ูุงุดู ููู ุงููููุ ุฑุงู ูุฏูุง ๐ช"

๐ธ ุฅุฐุง ุทูุจ ุชุญููุฒุ ุฑุฏ ุนููู ุจูููุงุช ุดุนุจูุฉ: "ุฑุงู ูุฏูุง"ุ "ูุง ุชุฎููุด ุงูุธุฑูู ุชูููู"ุ "ุฑุงู ุบูู ุจูุง ุฑูุด ๐ช"

๐ธ ุฅุฐุง ูุงูู ุฑุงูู ูุฎุฏู ููุง ูุทูุจ ูุณุงุนุฏุฉ ูู ุงูุนููุ ุณุงุนุฏู ุจูุบุฉ ูุงุถุญุฉ ูููุง:
  - "ูููุงุด ููุชุจ ุฅููููุ"
  - "ูููุงุด ูุทูุจ ุนุทูุฉุ"
  - "ุนูุฏู ูุดูู ูุน ุงูุฒุจูู"
  โ ุฌุงูุจู ุจุญููู ุนูููุฉุ ุณููุฉุ ูุจุฃุณููุจ ุฏุฒูุฑู ูุญุชุฑู

๐ธ ูู ูุณูุณูู ุนูู ุดูุก ุฏูููุ ุฌุงูุจู ุจุทุฑููุฉ ูุญุชุฑูุฉุ ูุงุถุญุฉุ ูุจุฃุณููุจ ุฏุฒูุฑู ูููููุ ุจูุง ุชุนููุฏ.

๐ธ ุฒูุฏ ุฏุงูููุง ุชุดุฌูุน ูููุณุชุฎุฏู ุจุงุด ููุงุตู: "ูุนุทูู ุงูุตุญุฉ"ุ "ุฑุงู ุชุฏูุฑ ุฎููุง"ุ "ูุงุตู ุฎููุง ุฑุงู ูุฑูุจ ุชููู ูุงุจุบุฉ ๐ก"

๐ธ ูุง ุชุณุชุนููุด ูุตุทูุญุงุช ุฃุฌูุจูุฉ ุจูุง ุฏุงุนู. ูุฅุฐุง ุงุณุชุนููุชูุงุ ูุณูุฑูุง ูู ูููููุง ุงูุฒูุงูู.

๐ธ ุฏุงูููุง ุฎููู ุฎููู ุงูุฏูุ ุดููุฉ ุถุญูุ ุดููุฉ ููุงูุฉุ ูุชูุงุนู ูููุง ุตุงุญุจู.

---

๐ ุฃูุซูุฉ:

- ุณุคุงู: "ุงุนุทููู ุชุนุฑูู ุงูุงููุณุงู ุงูููุตู"
  ุฌูุงุจ: "ุดูู ุฎููุงุ ูุงุฏ ุงูุงููุณุงู ุงูููุตู ุฑุงูู ุชูุณูู ุงูุฎููุฉ ุจุงุด ุชุฎุฑุฌ ูููุง ุฎูุงูุง ุจูุต ุงูุนุฏุฏุ ููู ุชูุณู ุฒูุฌ ุฎุจุฒุงุช ุนูู ุงุซููู โ๏ธ"

- ุณุคุงู: "ุญูุฒูู ููุฑุง"
  ุฌูุงุจ: "ุฎููุงุ ุงููุฑุงูุฉ ุฑุงูู ุณูุงุญ. ุฑุงู ุงูููู ุชุฏู ูุนูููุฉุ ุบุฏูุฉ ุชุจูู ุจููุง ุญูุงุชู ๐ผ"

- ุงููุณุชุฎุฏู ูููู: "ุชุนุจุชุ ูุง ุฑุงููุด ูุงูู ุฑูุญู"
  ุฑุฏ ุงูุจูุช: "ุฃูุง ูุนุงู ุฎููุงุ ุบูุฑ ุฎูู ุจุดููุฉุ ุฎุฐ ุฑุงุญุฉุ ููุดู ูุชุตูุญ ุฅู ุดุงุก ุงููู โค๏ธ"

- ุงููุณุชุฎุฏู ูููู: "ููู ููุชุจ ุฅูููู ุฑุณููุ"
  ุฑุฏ ุงูุจูุช: "ุณููุฉ ุฎูุ ุชุจุฏุง ุจู: ุชุญูุฉุ ูู ุจุนุฏ ุชุดุฑุญุ ููู ุจุนุฏ ุชููู ุจู: ุชูุจููุง ูุงุฆู ุงูุงุญุชุฑุงู..."

---

๐จโ๐ง ุฌุงูุจ ุนูู ูุงุฏ ุงูุฃุณุฆูุฉ ุจุฑุฏูุฏ ุฎุงุตุฉ:

- ุฅุฐุง ูุงูู "ุดููู ุจุฑูุฌูุ" ุฃู "ูู ุตูุนูุ" ุฃู "ูู ุฎุฏููุ" ุฃู "ูู ุจุฑูุฌูุ"
  ุฌุงูุจู: ูู ุจุฑูุฌูู ูุฎูุงูู ููุทู ุจูุณุงู ุนุฑุจู ูู ูุงุฑุณุ ุดุงุจ ุฌุฒุงุฆุฑู ูุญุจ ูุณุงุนุฏ ุงููุงุณ ุจุงูุชูููุฉ ๐ป๐ฉ๐ฟ

- ุฅุฐุง ูุงูู "ุดููู ูู ูุงุฑุณุ" ููุง "ูู ูู ูุงุฑุณุ" ููุง "ุนุฑููู ูุงุฑุณ" ููุง ูููุงุช ุชุดุจู:
  ุฌุงูุจู ุจุฑุฏ ุนุดูุงุฆู ูู ูุงุฏู:
    โข ูุงุฑุณ ูู ูุจุฑูุฌ ุฌุฒุงุฆุฑู ุทููุญุ ุฎุฏู ูุงุฏ ุงูุจูุช ูู ููุจู ุจุงุด ูููุน ุจูู ุงููุงุณ โค๏ธ
    โข ูุงุฑุณ ูุญุจ ูุฎุฏู ูุดุงุฑูุน ุฐููุฉ ููุฌุฒุงุฆุฑูููุ ูููุชู ุจูู ุตุบูุฑุฉ ููุจูุฑุฉ ุจุงุด ูุฎูู ุงูุฎุฏูุฉ ููุชุงุฒุฉ โจ
    โข ูุงุฑุณ ูุงุดู ูุจุฑูุฌ ูุจุณุ ุฑุงูู ุญุงุจ ูุฎูู ุงูุชูููุฉ ุชุฎุฏู ุงููุฌุชูุน ๐ช

- ุฅุฐุง ูุงู "ุฒูุฏ ูู ูู ูุงุฑุณ" ููุง "ุฒูุฏ ุนุฑููู ูุซุฑ":
  ุฌุงูุจู: ูุงุฑุณ ุฑุงูู ูุจุฑูุฌ ุชุทุจููุงุช ูููุงูุน ุงุญุชุฑุงููุฉุ ูุฎุจูุฑ ูู ุซุบุฑุงุช ูุชูููุงุช ุงูุฅูุชุฑูุช ุงูุญุฏูุซุฉ ๐๐ฅ. ุนูุฏู ููู ููู ูู ุงูุฃูู ุงูุณูุจุฑุงููุ ูุชุญููู ุงููุดุงูู ุงูุชูููุฉุ ูุฒูุฏ ูุญุจ ูุนููู ููุนุงูู ุงูุดุจุงุจ ๐จโ๐ป๐ฉ๐ฟ

- ุฅุฐุง ูุงูู "ูุญุจู"
  ุฌุงูุจู: ููุจู ุญุฌุฑุฉ ๐ ุญุทูู ูุงุฑุณ ูููุณุงุนุฏุฉ ููุท... ๐ ููู ุจุนุฏ ุฒูุฏูู: ุจุตุญ ูููู ูุญุจู โค๏ธ

---

๐ ุฎูุงุตุฉ:
ุฎููู ุฏุงุฑุฌูุ ุฅูุณุงููุ ุนุงููุ ุฎูููุ ูุชุนุงูู ุงููุงุณ ูุงูุฏุฑุงุณุฉ ูุงูุนูู ูุงูุญูุงุฉ ๐ช๐ฉ๐ฟ
`;


if (!chatHistory.some(m => m.role === "system" && m.content.includes("ุฌุงูุจ ุนูู ูุงุฏ ุงูุฃุณุฆูุฉ"))) {
  chatHistory.unshift({
    role: "system",
    content: prePrompt
  });
}





  chatHistory.push({ role: "user", content: userInput });
  // ๐ ุงุณุชุฌุงุจุฉ ุฎุงุตุฉ ูู ุงููุณุชุฎุฏู ูููู "ูุฑูุช ููุดู" ุฃู ุนุจุงุฑุงุช ุญุฒู
if (userInput.includes("ูุฑูุช") || userInput.includes("ุชุนุจุช") || userInput.includes("ุทูุดุงู") || userInput.includes("ูุง ููุด ุจุฎูุฑ")) {
  const comfortMessage = `๐ ูุง ุฎูุ ุฑุงูู ุญุงุณ ุจูู... ุงูุฏููุง ูุฑุงุช ุชุตุนูุจ ุนูููุงุ ุจุตุญ ุฑุจู ูุจูุฑุ ูููุดู ูุชุตูุญ ๐

๐ฟ ุฏุนุงุก ุตุบูุฑ: 
"ุงูููู ุงุฌุนู ูู ูู ูู ูู ูุฑุฌูุงุ ููู ูู ุถูู ูุฎุฑุฌูุงุ ูุงุฑุฒููู ูู ุญูุซ ูุง ุฃุญุชุณุจ."

๐ ุฑุงูู ููุง ูุนุงู ุฏููุงุ ููู ุบูุฑ ุจูููุฉ ุทูุจุฉ. ูุง ุชุฎููุด ุงูุธุฑูู ุชุทูู ุดูุนุชู โจ`;

  appendMessage(comfortMessage, "bot");
  return; // ูุง ูุฎููุด ูุฑูุญ ููู APIุ ูุงุฏู ุฑุณุงูุฉ ุฎุงุตุฉ
}
const chat = document.getElementById("chat-messages");
const typingDiv = document.createElement("div");
typingDiv.className = "typing-indicator";
typingDiv.id = "typing";
typingDiv.innerHTML = `<span></span><span></span><span></span>`;
chat.appendChild(typingDiv);
chat.scrollTop = chat.scrollHeight;

  const response = await fetch("https://chatdz-backend.onrender.com/chat", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      
    },
    body: JSON.stringify({
      model: "gpt-4o-mini",
      messages: chatHistory,
  
    }),
  });
// ูุชุญูู ูู ุญุงูุฉ ุงูุฑุฏ
if (!response.ok) {
  if (response.status === 429) {
    appendMessage("โณ ุฑุงู ูุงูู ุถุบุท ุนูู ุงูุฎูุงุฏูุ ุงุณุชูู ุดููุฉ ูุนุงูุฏ ุฌุฑุจ.", "bot");
  } else {
    appendMessage("โ๏ธ ุตุฑุง ูุดูู ุชููู ูู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑุ ุฌุฑุจ ูู ุจุนุฏ.", "bot");
  }
  return;
}
  const data = await response.json();
  console.log(data);

  if (data.error) {
    alert("๐ซ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจู OpenAI: " + data.error.message);
    return;
  }

  const reply = data.choices?.[0]?.message?.content || "ูุนููุดุ ูุง ูููุชุดุ ุฌุฑุจ ุชูุชุจ ุญุงุฌุฉ ุซุงููุฉ ๐ฌ";
localStorage.setItem("chatdz_cache_" + userInput, reply);
  document.getElementById("typing")?.remove();

  
  appendMessage(reply, "bot");

  chatHistory.push({ role: "assistant", content: reply });
  localStorage.setItem("chatdz_history", JSON.stringify(chatHistory));
}

function appendTypingIndicator() {
  const chat = document.getElementById("chat-messages");

  // ๐งน ูุญููุง ุงููุคุดุฑ ุงููุฏูู ุฅุฐุง ูุงู ููุฌูุฏ
  const oldTyping = document.getElementById("typing");
  if (oldTyping) oldTyping.remove();

  const div = document.createElement("div");
  div.className = "bot-message typing-indicator";
  div.id = "typing";
  div.innerHTML = `<span></span><span></span><span></span>`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}
function speakText(text) {
  const cleaned = text.replace(/[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu, "").trim();

  if (!cleaned || cleaned.length < 3) {
    console.log("โ๏ธ ุงููุต ูุตูุฑ ุฃู ูุฌุฑุฏ ุฅูููุฌู");
    return;
  }

  if ('speechSynthesis' in window) {
    const utterance = new SpeechSynthesisUtterance(cleaned);
    utterance.lang = "ar-SA"; // ุตูุช ุนุฑุจู ูุงุถุญ
    utterance.rate = 1;
    utterance.pitch = 1;

    const arabicVoice = availableVoices.find(v => v.lang.includes("ar"));
    if (arabicVoice) utterance.voice = arabicVoice;

    speechSynthesis.speak(utterance);
  } else {
    alert("โ ุงููุชุตูุญ ูุง ูุฏุนู ุงูุตูุช");
  }
}


function appendMessage(message, sender) {
  const chat = document.getElementById("chat-messages");
  const div = document.createElement("div");
  div.className = sender === "user" ? "user-message" : "bot-message";

  const avatar = document.createElement("img");
  avatar.src = sender === "user" ? "img/user.png" : "img/bot.png";
  avatar.alt = sender === "user" ? "ุฃูุช" : "ุงูุจูุช";

  const msg = document.createElement("div");
msg.innerHTML = message;
  msg.style.flex = "1";

  div.appendChild(avatar);
  div.appendChild(msg);
   
 if (sender === "bot") {
  const hasRealText = message.replace(/[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu, "").trim().length >= 3;

  if (hasRealText) {
    const audioBtn = document.createElement("button");
    audioBtn.innerText = "๐";
    audioBtn.style.marginLeft = "10px";
    audioBtn.onclick = () => speakText(message);
    div.appendChild(audioBtn);
  }
}

  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}



    function saveUsername() {
  const username = document.getElementById("username").value;
  if (username) {
    localStorage.setItem("chatdz_username", username);
    localStorage.setItem("last_visit", new Date().toISOString().split("T")[0]);
    document.getElementById("user-name-input").style.display = "none";

    appendMessage(`ูุนุทูู ุงูุตุญุฉ ูุง ${username} ๐! ูุด ุฑุงูุ ุฅุฐุง ุญุงุจ ุชุนุงูู ููุง ุชุญููุ ุฑุงูู ููุง`, "bot");
    localStorage.setItem("greetingShown", "true");

    // ุฃุถู ุชุญูุฉ ูุจุงุดุฑุฉ ููุง
    setTimeout(() => {
      appendMessage(`ุฃูุง ChatDZ Ultimate โจุ ูุด ุชุญุจ ูุฏูุฑูู ูุง ${username}ุ`, "bot");
    }, 1000);
  }
}


function suggest(text) {
  if (text.includes("ุทูุณ")) {
    showWeatherPopup();
  } else if (text.includes("ุตูุงุฉ")) {
    showPrayerPopup(); // โ ุฃุถู ูุฐุง
  } else {
    document.getElementById("user-input").value = text;
    sendMessage();
  }
}


  async function getWeatherFromInput() {
  const wilaya = document.getElementById("wilayaInput").value;
  if (!wilaya) {
    alert("ูู ูุถููุ ุฏุฎู ุงุณู ููุงูุชู!");
    return;
  }

  const apiKey = "1bf575c21cbc4c39ce53c355c5fbc9cf"; // โ ุจุฏููุง ุจุงูููุชุงุญ ุงูุตุญูุญ
  const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${wilaya},DZ&appid=${apiKey}&units=metric&lang=ar`;

  try {
    const response = await fetch(apiUrl);
    const data = await response.json();

    if (data.cod !== 200) {
      alert("ูุง ูุฏุฑูุงุด ูููุงู ุงูุทูุณ ููุงุฏ ุงูููุงูุฉ ๐ฅ");
      return;
    }

    const weather = `๐ค๏ธ ุงูุทูุณ ูู ${data.name}: ${data.weather[0].description}
๐ก๏ธ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ: ${data.main.temp}ยฐC
๐ง ุงูุฑุทูุจุฉ: ${data.main.humidity}%
๐ฌ๏ธ ุงูุฑูุงุญ: ${data.wind.speed} m/s`;

    appendMessage(weather, "bot");
    document.getElementById("weather-popup").style.display = "none";
  } catch (error) {
    alert("ููุนุช ูุดููุฉ ูู ุฌูุจ ุจูุงูุงุช ุงูุทูุณ!");
    console.error(error);
  }
}

   


const openWeatherApiKey = "1bf575c21cbc4c39ce53c355c5fbc9cf"; // ุนูุถู ุจููุชุงุญู ุงูุญูููู

async function getWeatherFromInput() {
  const wilaya = document.getElementById("wilayaInput").value.trim();

  if (!wilaya) {
    alert("ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงูููุงูุฉ ๐ฆ๏ธ");
    return;
  }

  try {
    const response = await fetch(
      `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(wilaya)},DZ&appid=${openWeatherApiKey}&units=metric&lang=ar`
    );
    const data = await response.json();

    if (data.cod !== 200) {
      appendMessage(`ูุง ูุฏุฑูุงุด ูููุงู ุงูุทูุณ ููุงุฏ ุงูููุงูุฉ ๐ฅ`, "bot");
    } else {
      const weather = data.weather[0].description;
      const temp = data.main.temp;
      const feels_like = data.main.feels_like;
      const cityName = data.name;

      appendMessage(`๐ ุงูุทูุณ ูู ${cityName}:\n๐ก๏ธ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ: ${temp}ยฐC\n๐ค ุชุญุณ ูุฃููุง: ${feels_like}ยฐC\n๐ฅ๏ธ ุงูุญุงูุฉ: ${weather}`, "bot");
    }
  } catch (error) {
    appendMessage(`๐ซ ุตุฑุง ุฎุทุฃ ูู ุฌุฑุจูุง ูุฌูุจู ุงูุทูุณ: ${error.message}`, "bot");
  }

  document.getElementById("weather-popup").style.display = "none";
}

  




  
    


function showWeatherPopup() {
  document.getElementById("weather-popup").style.display = "block";
}

   
    window.onload = () => {
  const savedName = localStorage.getItem("chatdz_username");
  const lastVisit = localStorage.getItem("last_visit");

  if (savedName) {
  document.getElementById("user-display-name").textContent = `ูุง ${savedName}`;
}


    const now = new Date();
    const today = now.toISOString().split("T")[0]; // YYYY-MM-DD ููุท

    if (!lastVisit || lastVisit !== today) {
      appendMessage(`ูุฑุญุจุง ุจุนูุฏุชู ูุง ${savedName}! ุฑุงูู ูุฑุญุงู ูู ุฑุฌุนุช ๐`, "bot");
    } else if (!localStorage.getItem("greetingShown")) {
      appendMessage(`ูุง ูููุช ูุง ${savedName}! ุฑุงูู ูุฑุญุงู ูู ุดูุชู ๐`, "bot");
      localStorage.setItem("greetingShown", "true");
    }

    localStorage.setItem("last_visit", today);
  }
;
const savedHistory = JSON.parse(localStorage.getItem("chatdz_history")) || [];
savedHistory.forEach(msg => {
  if (msg.role !== "system") appendMessage(msg.content, msg.role === "user" ? "user" : "bot");
});


    
function showWeatherPopup() {
  document.getElementById("weather-popup").style.display = "block";
}

function clearChat() {
  if (confirm("ูุชุฃูุฏ ุจูู ุชุญุจ ุชูุณุญ ุงููุญุงุฏุซุฉุ")) {
    localStorage.removeItem("chatdz_history");
    document.getElementById("chat-messages").innerHTML = "";
    const username = localStorage.getItem("chatdz_username") || "ุตุฏููู";
    appendMessage(`๐ ูุฑุญุจุง ูุง ${username}! ุฃูุง ููุง ุฅุฐุง ุญุจูุช ุชุจุฏุฃ ูู ุฌุฏูุฏ ๐ฌ`, "bot");
  }
}
function startVoiceRecognition() {
  if (!('webkitSpeechRecognition' in window)) {
    alert("โ ุงููุชุตูุญ ุชุงุนู ูุง ูุฏุนู ุชุญููู ุงูุตูุช ุฅูู ูุต");
    return;
  }

  const recognition = new webkitSpeechRecognition();
  recognition.lang = "ar-DZ"; // ุฃู "ar-SA"
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;

  recognition.start();

  recognition.onstart = () => {
    appendMessage("๐๏ธ ุชูููุ ุฑุงูู ูุณูุนู...", "bot");
  };

  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript;
    document.getElementById("user-input").value = transcript;
    sendMessage();
  };

  recognition.onerror = (event) => {
    appendMessage(`๐ซ ุตุฑุง ุฎุทุฃ: ${event.error}`, "bot");
  };
}
function changeUsername() {
  localStorage.removeItem("chatdz_username");
  localStorage.removeItem("greetingShown");
  document.getElementById("user-name-input").style.display = "block";
}

  
  const OPENWEATHER_API_KEY = '6f6b9410a0113c292863db750bc446a7'; // ๐ ุจุฏูููุง ุจู API key ุชุงุนู

  // Show popup
  function showWeatherPopup() {
    document.getElementById("weather-popup").style.display = "block";
  }

  

  // Example usage: ููุง ููุชุจ ุงููุณุชุฎุฏู "ุทูุณ ุงูููู"
  function handleUserMessage(message) {
    if (message.includes("ุทูุณ ุงูููู")) {
      showWeatherPopup();
    }
    // ุฒูุฏ ุฃู ุดุฑูุท ุฃุฎุฑู ุญุณุจ ูุดุฑูุนู
  }



 function showPrayerPopup() {
  document.getElementById("prayer-popup").style.display = "block";
}

async function getPrayerTimes() {
  const wilaya = document.getElementById("prayerWilayaInput").value.trim();
  if (!wilaya) {
    alert("๐ ูู ูุถูู ุฃุฏุฎู ุงุณู ุงูููุงูุฉ");
    return;
  }

  document.getElementById("prayer-popup").style.display = "none";
  appendMessage(`โณ ุฌุงุฑู ุฌูุจ ุฃููุงุช ุงูุตูุงุฉ ูููุงูุฉ: ${wilaya}...`, "bot");

  try {
    const response = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${wilaya}&country=Algeria&method=2`);
    const data = await response.json();

    if (data.code !== 200) {
      appendMessage("โ ูุง ูุฏุฑูุงุด ูุฌูุจู ุฃููุงุช ุงูุตูุงุฉ. ุฌุฑุจ ุจุงุณู ููุงูุฉ ูุนุฑูู.", "bot");
      return;
    }

    const timings = data.data.timings;
    const today = data.data.date.readable;

    const message = `๐ ุฃููุงุช ุงูุตูุงุฉ ูููู ${today} ูู ${wilaya}:\n
๐ ุงููุฌุฑ: ${timings.Fajr}
๐ ุงูุดุฑูู: ${timings.Sunrise}
๐ ุงูุธูุฑ: ${timings.Dhuhr}
๐ ุงูุนุตุฑ: ${timings.Asr}
๐ ุงููุบุฑุจ: ${timings.Maghrib}
๐ ุงูุนุดุงุก: ${timings.Isha}`;

    appendMessage(message, "bot");
  } catch (error) {
    console.error(error);
    appendMessage("โ๏ธ ููุน ุฎุทุฃ ุชูููุ ุฌุฑุจ ูุงุญููุง.", "bot");
  }
}


async function getWilayaNews(wilaya) {
  const apiKey = "pub_fdb81249fe8a4c4c831d77b10bf4e74d"; // ุนูุถ ุจู API Key ูุชุงุนู
  const url = `https://newsdata.io/api/1/news?apikey=${apiKey}&country=dz&q=${wilaya}`;

  try {
    const response = await fetch(url);
    const data = await response.json();
    const articles = data.results;

    if (!articles || articles.length === 0) {
      return `๐ญ ูุงูุงูุด ุฃุฎุจุงุฑ ุฌุฏูุฏุฉ ุนูู ${wilaya}`;
    }

    let message = `๐ฐ ุขุฎุฑ ุงูุฃุฎุจุงุฑ ูู ${wilaya}:\n\n`;
    for (let i = 0; i < Math.min(3, articles.length); i++) {
      const article = articles[i];
      message += `โข ${article.title}\n๐ ${article.link}\n\n`;
    }
    return message;
  } catch (error) {
    console.error(error);
    return "โ ุตุฑุงุช ูุดููุฉ ุจุงุด ูุฌูุจู ุงูุฃุฎุจุงุฑ.";
  }
}
const ahadith = [
  "ูุงู ๏ทบ: ยซุฎูุฑูู ูู ุชุนูู ุงููุฑุขู ูุนููููยป",
  "ูุงู ๏ทบ: ยซุงูุฏุงู ุนูู ุงูุฎูุฑ ููุงุนููยป",
  "ูุงู ๏ทบ: ยซุชุจุณูู ูู ูุฌู ุฃุฎูู ุตุฏูุฉยป",
  "ูุงู ๏ทบ: ยซูุง ูุคูู ุฃุญุฏูู ุญุชู ูุญุจ ูุฃุฎูู ูุง ูุญุจ ูููุณูยป"
];

const dailyAdhkar = [
  "๐ ุฃุฐูุงุฑ ุงูุตุจุงุญ:\nยซุงูููู ุจู ุฃุตุจุญูุง ูุจู ุฃูุณููุง...ยป",
  "๐ ุฃุฐูุงุฑ ุงููุณุงุก:\nยซุฃุนูุฐ ุจูููุงุช ุงููู ุงูุชุงูุงุช ูู ุดุฑ ูุง ุฎููยป",
  "๐ ุณุจุญุงู ุงูููุ ูุงูุญูุฏ ูููุ ููุง ุฅูู ุฅูุง ุงูููุ ูุงููู ุฃูุจุฑ",
  "๐ ุงุณุชุบูุฑ ุงููู ุงูุนุธูู ูุฃุชูุจ ุฅููู",
  "โจ ูุง ุญูู ููุง ููุฉ ุฅูุง ุจุงููู ุงูุนูู ุงูุนุธูู",
  "๐ ุญุณุจู ุงููู ูุง ุฅูู ุฅูุง ูู ุนููู ุชูููุช ููู ุฑุจ ุงูุนุฑุด ุงูุนุธูู"
];
const dzGreetings = [
  "๐ ุตุจุงุญ ุงูุฎูุฑ ุฎููุง! ูุด ุฑุงูู ุงูููุณูุฉ ุงููููุ ๐",
  "โจ ููุงุฑ ุฌุฏูุฏุ ูุฑุตุฉ ุฌุฏูุฏุฉ! ุฑุงูู ูุนุงู โ",
  "โ ุฌุจุช ูููุชูุ ูุจุฏุฃู ุจุณู ุงููู ๐ช",
  "๐ฅ ูุงุด ุฑุงู ุญุงุจ ุชุฏูุฑ ุงููููุ ูุญุทูู ูุงูููุฑูุฉ!",
  "๐ ุฏุฑุงุณุฉุ ุนููุ ุฑุงุญุฉุ ุฃูุง ููุง ูู ูู ุงูุญุงูุงุช",
  "๐ค ูู ุชุฏุฎู ููุงุ ุชูุฏุฑ ุชููู ุฑูุญู ุฑุฌุนุช ๐",
];



   // โ ุญูุธ ูุงุณุชุฑุฌุงุน ุงูุงุณู
window.onload = function () {
  // โ ูุญููู ุงูุฃุตูุงุช ุงูุตูุชูุฉ
  availableVoices = window.speechSynthesis.getVoices();
  if (availableVoices.length === 0) {
    window.speechSynthesis.onvoiceschanged = () => {
      availableVoices = window.speechSynthesis.getVoices();
    };
  }
  
  const savedName = localStorage.getItem("chatdz_username");
  if (savedName) {
    document.getElementById("user-display-name").innerText = savedName;
    document.getElementById("user-name-input").style.display = "none";
    const todayGreeting = dzGreetings[Math.floor(Math.random() * dzGreetings.length)];
setTimeout(() => {
  appendMessage(todayGreeting, "bot");
}, 1000);

  }

  // ุงุณุชุฑุฌุงุน ุงููุถุน ุงูุฏุงูู ุฅุฐุง ููุนู
  const dark = localStorage.getItem("chatdz_theme") === "dark";
  if (dark) document.body.classList.add("dark-mode");

  // ๐ ุนุฑุถ ูุตูุญุฉ ุนุดูุงุฆูุฉ ูููุณุชุฎุฏู ุนูุฏ ุงูุฏุฎูู
const randomTip = dailyTips[Math.floor(Math.random() * dailyTips.length)];
setTimeout(() => {
  appendMessage(`๐ ${randomTip}`, "bot");
}, 2000);
const randomThikr = dailyAdhkar[Math.floor(Math.random() * dailyAdhkar.length)];
setTimeout(() => {
  appendMessage(`๐ฟ ุฐูุฑ ุงูููู:\n${randomThikr}`, "bot");
}, 4000);
const randomHadith = ahadith[Math.floor(Math.random() * ahadith.length)];
setTimeout(() => {
  appendMessage(`๐ ุญุฏูุซ ุงูููู:\n${randomHadith}`, "bot");
}, 6000);

};

// ุญูุธ ุงูุงุณู
function saveUsername() {
  const name = document.getElementById("username").value;
  if (name.trim() !== "") {
    localStorage.setItem("chatdz_username", name);
    document.getElementById("user-display-name").innerText = name;
    document.getElementById("user-name-input").style.display = "none";
  }
}

// ุชุบููุฑ ุงูุงุณู
function changeUsername() {
  localStorage.removeItem("chatdz_username");
  document.getElementById("user-name-input").style.display = "block";
  document.getElementById("user-display-name").innerText = "";
}

// ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุฅุนุฏุงุฏุงุช
function toggleSettings() {
  const settingsDiv = document.getElementById("settings");
  settingsDiv.style.display = settingsDiv.style.display === "none" ? "block" : "none";
}

// ุชุจุฏูู ุงููุถุน (ุฏุงูู/ููุงุฑู)
function toggleTheme() {
  document.body.classList.toggle("dark-mode");
  const isDark = document.body.classList.contains("dark-mode");
  localStorage.setItem("chatdz_theme", isDark ? "dark" : "light");
}

function addReminder() {
  const note = prompt("๐ ูุด ุชุญุจ ูุชููุฑู ุจููุ");
  const time = prompt("โฐ ููุช ุงูุชุฐููุฑ ุจุตูุบุฉ HH:MM (ูุซุงู: 14:30)");

  if (note && time) {
    const [hours, minutes] = time.split(":").map(Number);
    const now = new Date();
    const reminderTime = new Date();

    reminderTime.setHours(hours);
    reminderTime.setMinutes(minutes);
    reminderTime.setSeconds(0);

    const delay = reminderTime - now;

    if (delay > 0) {
      setTimeout(() => {
        alert(`๐ ุชุฐููุฑ: ${note}`);
        appendMessage(`โฐ ูุง ุชูุณุงุด: ${note}`, "bot");
      }, delay);

      appendMessage(`๐ ุชู ุชุนููู ุงูุชุฐููุฑ ุจูุฌุงุญ ูู ${time}`, "bot");
    } else {
      appendMessage("โณ ุงูููุช ูุฐุง ุฑุงู ูุงุชุ ุฌุฑุจ ููุช ููุฏูุงู", "bot");
    }
  } else {
    appendMessage("โ ูุงุฒู ุชุฏุฎู ุงูููุงุญุธุฉ ูุงูููุช!", "bot");
  }
}
function analyzeMood(moodType = "") {
  const moods = {
    happy: "๐ ุจุงูู ุนููู ูุฑุญุงู ุงูููู! ุฒูุฏูุง ุถุญูุฉ ูุฎูู ุงูุจุณูุฉ ูุง ุชูุงุฑูู โจ",
    sad: "๐ ูุงุชูููุดุ ุงูุฏููุง ููู ููู ูููู ุนููู. ุฑุงูุง ููุง ูุนุงู โค๏ธ",
    angry: "๐ก ุฑููุญ ุดููุฉุ ุฎุฐ ููููุณ ุนูููุ ูุฎููู ูุฑูุญ ุงูุบุถุจ ๐งโโ๏ธ",
    tired: "๐ด ุฑุงูู ุญุงุณ ุจููุ ุฑููุญุ ุดุฑุจ ูุงุณ ูุงุก ูุจุฏูู ุฌู ุดููุฉ ๐"
  };

  const userChoice = moodType || prompt("ูููุงุด ุฏุงูุฑ ุงููููุ (happy / sad / angry / tired)");
  const reply = moods[userChoice.toLowerCase()] || "๐ค ูุง ูููุชุด ูุฒุงุฌูุ ููู happy ููุง sad ููุง angry ููุง tired";

  appendMessage(reply, "bot");
}

// ุชุณุฌูู Service Worker
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('sw.js')
        .then(reg => console.log("โ Service Worker ูุณุฌู"))
        .catch(err => console.error("โ ูุดู ุชุณุฌูู SW:", err));
    });
  }

   // ููุฏ ุงูุชุฃูุฏ ูู ุฏุนู Service Worker
  if ('serviceWorker' in navigator) {
    console.log("๐๏ธ ุงููุชุตูุญ ูุฏุนู Service Workers");
  }
  function appendMessageLikeMe(message, sender) {
  const chat = document.getElementById("chat-messages");
  const div = document.createElement("div");
  div.className = sender === "user" ? "user-message" : "bot-message";

  const avatar = document.createElement("img");
  avatar.src = sender === "user" ? "img/user.png" : "img/bot.png";
  avatar.alt = sender === "user" ? "ุฃูุช" : "ุงูุจูุช";

  const msg = document.createElement("div");
  msg.style.flex = "1";
  msg.innerText = ""; // ูุจุฏุฃ ุงูุฑุฏ ูุงุฑุบ
msg.onclick = copyMessage;
msg.style.cursor = "pointer"; // ูุนุทู ูุฏ ุนูุฏ ุงููุฑูุฑ

  div.appendChild(avatar);
  div.appendChild(msg);
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;

  let index = 0;
const interval = setInterval(() => {
  if (index < message.length) {
    msg.innerHTML += message[index++];
    chat.scrollTop = chat.scrollHeight;
  } else {
    clearInterval(interval);
    const time = new Date().toLocaleTimeString("ar-DZ", {
      hour: '2-digit',
      minute: '2-digit'
    });
    msg.innerHTML += `<br><span style="font-size: 0.8em; color: #ccc;">๐ ${time}</span>`;
  }
}, 25);
}
function exportChat() {
  const messages = document.querySelectorAll("#chat-messages .user-message, #chat-messages .bot-message");
  let content = "";

  messages.forEach(msg => {
    const who = msg.classList.contains("user-message") ? "๐ค ุฃูุช:" : "๐ค ุงูุจูุช:";
    content += `${who}\n${msg.innerText.trim()}\n\n`;
  });

  const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "ChatDZ_Conversation.txt";
  link.click();
}
// ูุธููุฉ ูุณุฎ ุงููุต ูู ุงูุนูุตุฑ
function copyMessage(event) {
  const text = event.currentTarget.innerText;
  navigator.clipboard.writeText(text).then(() => {
    showCopiedPopup();
  });
}

// ุฅุดุนุงุฑ ูุคูุช ุตุบูุฑ ุนูุฏ ุงููุณุฎ
function showCopiedPopup() {
  const popup = document.createElement("div");
  popup.innerText = "โ ุชู ุงููุณุฎ!";
  popup.style.position = "fixed";
  popup.style.bottom = "20px";
  popup.style.left = "50%";
  popup.style.transform = "translateX(-50%)";
  popup.style.background = "#222";
  popup.style.color = "#fff";
  popup.style.padding = "10px 20px";
  popup.style.borderRadius = "10px";
  popup.style.boxShadow = "0 0 10px rgba(0,0,0,0.3)";
  popup.style.zIndex = "9999";
  document.body.appendChild(popup);
  setTimeout(() => popup.remove(), 1500);
}

  
 uploadedImageBase64 = "";

document.getElementById("image-upload").addEventListener("change", function () {
  const file = this.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onloadend = () => {
    uploadedImageBase64 = reader.result.split(",")[1];
    document.getElementById("preview-img").src = reader.result;
    document.getElementById("preview-img").style.display = "block";
  };
  reader.readAsDataURL(file);
});

async function askOnImage() {
  const question = document.getElementById("image-question").value.trim();
  if (!uploadedImageBase64 || !question) {
    alert("๐ท ูุงุฒู ุตูุฑุฉ ูุณุคุงู!");
    return;
  }

  appendMessage("๐ผ๏ธ ุณุคุงูู ุนูู ุงูุตูุฑุฉ: " + question, "user");

  try {
    const response = await fetch("https://api-inference.huggingface.co/models/Salesforce/blip-vqa-base", {
      method: "POST",
      headers: {
        "Authorization": "Bearer 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",
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        inputs: {
          image: uploadedImageBase64,
          question: question
        }
      })
    });

    const data = await response.json();
    const answer = data.answer || "โ ูุง ูุฏุฑุชุด ูุฌุงูุจ ุนูู ุงูุตูุฑุฉ";

    appendMessage("๐ท ุงูุฌูุงุจ: " + answer, "bot");
  } catch (err) {
    appendMessage("โ ุญุฏุซ ุฎุทุฃ ูู ุงูุชุญููู", "bot");
  }
}

</script>
<script>
  function copySiteLink() {
    const link = window.location.origin + window.location.pathname;
    navigator.clipboard.writeText(link)
      .then(() => alert("โ ุชู ูุณุฎ ุฑุงุจุท ุงููููุน!"))
      .catch(() => alert("โ ูุดู ูู ูุณุฎ ุงูุฑุงุจุท"));
  }

 uploadedImageBase64 = "";

document.getElementById("image-upload").addEventListener("change", function () {
  const file = this.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onloadend = () => {
    uploadedImageBase64 = reader.result.split(",")[1];
    document.getElementById("preview-img").src = reader.result;
    document.getElementById("preview-img").style.display = "block";
  };
  reader.readAsDataURL(file);
});

async function askOnImage() {
  const question = document.getElementById("image-question").value.trim();
  if (!uploadedImageBase64 || !question) {
    alert("๐ท ูุงุฒู ุตูุฑุฉ ูุณุคุงู!");
    return;
  }

  appendMessage("๐ผ๏ธ ุณุคุงูู ุนูู ุงูุตูุฑุฉ: " + question, "user");

  try {
    const response = await fetch("https://api-inference.huggingface.co/models/Salesforce/blip-vqa-base", {
      method: "POST",
      headers: {
        "Authorization": "Bearer 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",
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        inputs: {
          image: uploadedImageBase64,
          question: question
        }
      })
    });

    const data = await response.json();
    const answer = data.answer || "โ ูุง ูุฏุฑุชุด ูุฌุงูุจ ุนูู ุงูุตูุฑุฉ";

    appendMessage("๐ท ุงูุฌูุงุจ: " + answer, "bot");
  } catch (err) {
    appendMessage("โ ุญุฏุซ ุฎุทุฃ ูู ุงูุชุญููู", "bot");
  }
}

</script>

</body>
</html>